// Function to check single geoentity with its name
async function getDataFromSingleGeoentity(id) {
  try {
    // First, get the name from sources API
    const sourcesUrl = 'https://vedas.sac.gov.in/geoentity-services/api/geoentity-sources/';
    const sourcesRes = await fetch(sourcesUrl);
    
    let sourceName = `ID ${id}`;
    
    if (sourcesRes.ok) {
      const sourcesData = await sourcesRes.json();
      const sourceItem = sourcesData.data.find(item => item.id === id);
      if (sourceItem) {
        sourceName = sourceItem.name;
      }
    }
    
    // Now check the geoentity endpoint
    const geoUrl = `https://vedas.sac.gov.in/geoentity-services/api/geoentity-sources/${id}/geoentities`;
    const geoRes = await fetch(geoUrl);
    
    if (!geoRes.ok) {
      return {
        name: sourceName,
        latest: '-',
        count: 0,
        status: 'alert'
      };
    }
    
    const geoData = await geoRes.json();
    
    return {
      name: sourceName,
      latest: '-',
      count: geoData.count || 0,
      status: 'ok'
    };
    
  } catch (err) {
    console.error(`Error fetching geoentity ID ${id}:`, err);
    return {
      name: `ID ${id}`,
      latest: '-',
      count: 0,
      status: 'offline'
    };
  }
}







// Entry for Sources API
"Geoentity Sources API": {
  type: "geoentity",
  monitoring: async function () {
    const data = await getDataFromGeoentitySources();
    return {
      dataset: "Geoentity Sources API",
      applicationIds: ["geoentity_service"],
      ...data
    };
  }
},

// Entry for ID 18
"Geoentity - ID 18": {
  type: "geoentity",
  monitoring: async function () {
    const data = await getDataFromSingleGeoentity(18);
    return {
      dataset: `Geoentity - ${data.name}`,
      applicationIds: ["geoentity_service"],
      latest: data.latest,
      count: data.count,
      status: data.status
    };
  }
},

// Entry for ID 19 (example)
"Geoentity - ID 19": {
  type: "geoentity",
  monitoring: async function () {
    const data = await getDataFromSingleGeoentity(19);
    return {
      dataset: `Geoentity - ${data.name}`,
      applicationIds: ["geoentity_service"],
      latest: data.latest,
      count: data.count,
      status: data.status
    };
  }
},
