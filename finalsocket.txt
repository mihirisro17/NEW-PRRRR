<div class="alert-body">
    <div v-if="totalAlerts === 0" class="no-alerts">
        ðŸŽ‰ No alerts<br>All systems operational
    </div>

    <div v-else>
        <!-- âœ… FIX: Change variable name from 'alerts' to 'categoryAlerts' -->
        <template v-for="(categoryAlerts, category) in alertsByCategory" :key="category">
            <div v-if="categoryAlerts && categoryAlerts.length > 0" class="alert-section">
                <div class="alert-section-header" @click="toggleSection(category)">
                    <div class="alert-section-title">
                        {{ getCategoryIcon(category) }} {{ getCategoryName(category) }} ({{ categoryAlerts.length }})
                    </div>
                    <span class="collapse-icon" :class="{ collapsed: collapsedSections[category] }">â–¼</span>
                </div>
                <div class="alert-section-content"
                    :class="{ collapsed: collapsedSections[category], 'limit-height': !collapsedSections[category] && categoryAlerts.length > 2 }">
                    <div v-for="(alert, index) in categoryAlerts" :key="category + '-' + index"
                        class="alert-item" :class="'alert-' + alert.type.toLowerCase()">
                        <div class="alert-content">
                            <div class="alert-type">{{ alert.type }}</div>
                            <div class="alert-message">{{ alert.message }}</div>
                            <div class="alert-server">{{ alert.server }}</div>
                        </div>
                        <button class="alert-delete-btn" @click="removeAlert(category, index)" title="Remove alert">âœ•</button>
                    </div>
                </div>
            </div>
        </template>
    </div>
</div>
