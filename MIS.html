<div class="stats-container">
    <!-- Server Alerts Card -->
    <div class="stat-card alert-card-server" :class="{ 'alert-pulse': serverAlerts.length > 0 }" @click="openAlertModal('server')">
        <div class="stat-icon">üñ•Ô∏è</div>
        <div class="stat-value">{{ serverAlerts.length }}</div>
        <div class="stat-label">Server Alerts</div>
        <div class="card-hint" v-if="serverAlerts.length > 0">Click to view details</div>
    </div>

    <!-- Dataset Alerts Card -->
    <div class="stat-card alert-card-dataset" :class="{ 'dataset-pulse': datasetAlerts.length > 0 }" @click="openAlertModal('dataset')">
        <div class="stat-icon">üìä</div>
        <div class="stat-value">{{ datasetAlerts.length }}</div>
        <div class="stat-label">Dataset Alerts</div>
        <div class="card-hint" v-if="datasetAlerts.length > 0">Click to view details</div>
    </div>

    <!-- Process Alerts Card -->
    <div class="stat-card alert-card-process" :class="{ 'process-pulse': processAlerts.length > 0 }" @click="openAlertModal('process')">
        <div class="stat-icon">‚öôÔ∏è</div>
        <div class="stat-value">{{ processAlerts.length }}</div>
        <div class="stat-label">Process Alerts</div>
        <div class="card-hint" v-if="processAlerts.length > 0">Click to view details</div>
    </div>

    <!-- Storage Pool Alerts Card -->
    <div class="stat-card alert-card-storage" :class="{ 'storage-pulse': storageAlerts.length > 0 }" @click="openAlertModal('storage')">
        <div class="stat-icon">üíæ</div>
        <div class="stat-value">{{ storageAlerts.length }}</div>
        <div class="stat-label">Storage Pool Alerts</div>
        <div class="card-hint" v-if="storageAlerts.length > 0">Click to view details</div>
    </div>

    <!-- Total Servers Card -->
    <div class="stat-card">
        <div class="stat-icon">üåê</div>
        <div class="stat-value">{{ totalServers }}</div>
        <div class="stat-label">Total Servers</div>
    </div>

    <!-- Active Services Card -->
    <div class="stat-card">
        <div class="stat-icon">üîß</div>
        <div class="stat-value">{{ totalServices }}</div>
        <div class="stat-label">Active Services</div>
    </div>
</div>








<!-- ALERT DETAILS MODAL -->
<transition name="fade">
    <div v-if="showAlertModal" class="alert-detail-modal" @click.self="closeAlertModal">
        <div class="alert-detail-content">
            <div class="alert-detail-header" :class="'alert-header-' + currentAlertType">
                <div class="alert-detail-title">
                    <span class="alert-detail-icon">{{ alertModalIcon }}</span>
                    <span>{{ alertModalTitle }}</span>
                    <span class="alert-detail-badge">{{ filteredAlertsForModal.length }}</span>
                </div>
                <button class="alert-detail-close-btn" @click="closeAlertModal">‚úï</button>
            </div>

            <div class="alert-detail-body">
                <div v-if="filteredAlertsForModal.length === 0" class="no-alerts-modal">
                    <div class="no-alerts-icon">‚úÖ</div>
                    <div class="no-alerts-text">No {{ alertModalTitle }}</div>
                    <div class="no-alerts-subtext">All systems are running smoothly!</div>
                </div>

                <div v-else>
                    <div v-for="(alert, index) in filteredAlertsForModal" :key="'modal-' + index" 
                         class="alert-detail-item" :class="'alert-' + alert.type.toLowerCase()">
                        <div class="alert-detail-item-header">
                            <span class="alert-detail-type">{{ alert.type.toUpperCase() }}</span>
                            <span class="alert-detail-severity" :class="'severity-' + getSeverity(alert.type)">
                                {{ getSeverityLabel(alert.type) }}
                            </span>
                        </div>
                        <div class="alert-detail-message">{{ alert.message }}</div>
                        <div class="alert-detail-server">
                            <span class="alert-detail-server-icon">üñ•Ô∏è</span>
                            {{ alert.server }}
                        </div>
                        <div v-if="alert.lastScanTime" class="alert-detail-time">
                            <span class="alert-detail-time-icon">üïê</span>
                            {{ alert.lastScanTime }}
                        </div>
                        <div v-if="alert.prediction" class="alert-detail-prediction">
                            <span class="alert-detail-prediction-icon">üìà</span>
                            <strong>Predicted Full:</strong> {{ alert.prediction }}
                        </div>
                        <div v-if="alert.usage" class="alert-detail-usage">
                            <div class="usage-bar-container">
                                <div class="usage-bar" :style="{ width: alert.usage + '%' }" :class="getUsageClass(alert.usage)"></div>
                            </div>
                            <div class="usage-text">
                                <span><strong>Usage:</strong> {{ alert.usage }}%</span>
                                <span v-if="alert.remaining"><strong>Remaining:</strong> {{ alert.remaining }} GB</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="alert-detail-footer">
                <div class="alert-detail-footer-stats">
                    <span class="footer-stat">
                        <span class="footer-stat-icon">üìä</span>
                        Total: {{ filteredAlertsForModal.length }}
                    </span>
                    <span class="footer-stat">
                        <span class="footer-stat-icon">üî¥</span>
                        Critical: {{ getCriticalCount() }}
                    </span>
                    <span class="footer-stat">
                        <span class="footer-stat-icon">‚ö†Ô∏è</span>
                        Warnings: {{ getWarningCount() }}
                    </span>
                </div>
                <button class="alert-detail-action-btn" @click="closeAlertModal">
                    <span>‚úì</span> Got it
                </button>
            </div>
        </div>
    </div>
</transition>








computed: {
    // ... existing computed properties ...
    
    alertModalIcon() {
        const icons = {
            server: 'üñ•Ô∏è',
            dataset: 'üìä',
            process: '‚öôÔ∏è',
            storage: 'üíæ'
        };
        return icons[this.currentAlertType] || 'üîî';
    },
    
    alertModalTitle() {
        const titles = {
            server: 'Server Alerts',
            dataset: 'Dataset Alerts',
            process: 'Process Alerts',
            storage: 'Storage Pool Alerts'
        };
        return titles[this.currentAlertType] || 'Alerts';
    },
    
    filteredAlertsForModal() {
        if (this.currentAlertType === 'server') {
            return this.serverAlerts;
        } else if (this.currentAlertType === 'dataset') {
            return this.datasetAlerts;
        } else if (this.currentAlertType === 'process') {
            return this.processAlerts;
        } else if (this.currentAlertType === 'storage') {
            return this.storageAlerts;
        }
        return [];
    }
},









methods: {
    // ... existing methods ...
    
    openAlertModal(type) {
        this.currentAlertType = type;
        this.showAlertModal = true;
    },
    
    closeAlertModal() {
        this.showAlertModal = false;
        this.currentAlertType = '';
    },
    
    getSeverity(type) {
        const typeStr = type.toLowerCase();
        if (typeStr === 'offline' || typeStr === 'failed' || typeStr === 'alert') {
            return 'critical';
        } else if (typeStr === 'warning' || typeStr === 'memory' || typeStr === 'cpu' || typeStr === 'storage' || typeStr === 'disk') {
            return 'warning';
        } else if (typeStr === 'info') {
            return 'info';
        }
        return 'warning';
    },
    
    getSeverityLabel(type) {
        const severity = this.getSeverity(type);
        if (severity === 'critical') return 'üî¥ Critical';
        if (severity === 'warning') return '‚ö†Ô∏è Warning';
        if (severity === 'info') return '‚ÑπÔ∏è Info';
        return '‚ö†Ô∏è Warning';
    },
    
    getUsageClass(usage) {
        const usageNum = parseFloat(usage);
        if (usageNum >= 90) return 'usage-critical';
        if (usageNum >= 75) return 'usage-warning';
        return 'usage-normal';
    },
    
    getCriticalCount() {
        return this.filteredAlertsForModal.filter(alert => {
            const type = alert.type.toLowerCase();
            return type === 'offline' || type === 'failed' || type === 'alert';
        }).length;
    },
    
    getWarningCount() {
        return this.filteredAlertsForModal.filter(alert => {
            const type = alert.type.toLowerCase();
            return type === 'warning' || type === 'memory' || type === 'cpu' || type === 'storage' || type === 'disk';
        }).length;
    }
}




/* ‚ú® CARD COLORS FOR EACH TYPE */
.alert-card-server {
    border: 3px solid rgba(239, 68, 68, 0.3) !important;
}

.alert-card-dataset {
    border: 3px solid rgba(99, 102, 241, 0.3) !important;
}

.alert-card-process {
    border: 3px solid rgba(245, 158, 11, 0.3) !important;
}

.alert-card-storage {
    border: 3px solid rgba(59, 130, 246, 0.3) !important;
}

/* ‚ú® PULSING ANIMATIONS FOR EACH TYPE */
.alert-pulse {
    animation: alertPulse 2s infinite !important;
}

.dataset-pulse {
    animation: datasetPulse 2s infinite !important;
}

.process-pulse {
    animation: processPulse 2s infinite !important;
}

.storage-pulse {
    animation: storagePulse 2s infinite !important;
}

@keyframes alertPulse {
    0%, 100% {
        box-shadow: 0 8px 24px rgba(239, 68, 68, 0.3), 0 0 0 0 rgba(239, 68, 68, 0.4);
        border-color: rgba(239, 68, 68, 0.4);
    }
    50% {
        box-shadow: 0 12px 36px rgba(239, 68, 68, 0.5), 0 0 0 12px rgba(239, 68, 68, 0);
        border-color: rgba(239, 68, 68, 0.6);
    }
}

@keyframes datasetPulse {
    0%, 100% {
        box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3), 0 0 0 0 rgba(99, 102, 241, 0.4);
        border-color: rgba(99, 102, 241, 0.4);
    }
    50% {
        box-shadow: 0 12px 36px rgba(99, 102, 241, 0.5), 0 0 0 12px rgba(99, 102, 241, 0);
        border-color: rgba(99, 102, 241, 0.6);
    }
}

@keyframes processPulse {
    0%, 100% {
        box-shadow: 0 8px 24px rgba(245, 158, 11, 0.3), 0 0 0 0 rgba(245, 158, 11, 0.4);
        border-color: rgba(245, 158, 11, 0.4);
    }
    50% {
        box-shadow: 0 12px 36px rgba(245, 158, 11, 0.5), 0 0 0 12px rgba(245, 158, 11, 0);
        border-color: rgba(245, 158, 11, 0.6);
    }
}

@keyframes storagePulse {
    0%, 100% {
        box-shadow: 0 8px 24px rgba(59, 130, 246, 0.3), 0 0 0 0 rgba(59, 130, 246, 0.4);
        border-color: rgba(59, 130, 246, 0.4);
    }
    50% {
        box-shadow: 0 12px 36px rgba(59, 130, 246, 0.5), 0 0 0 12px rgba(59, 130, 246, 0);
        border-color: rgba(59, 130, 246, 0.6);
    }
}

/* ‚ú® HEADER COLORS FOR EACH TYPE */
.alert-header-server::before {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
}

.alert-header-dataset::before {
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
}

.alert-header-process::before {
    background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);
}

.alert-header-storage::before {
    background: linear-gradient(135deg, #3b82f6 0%, #0ea5e9 100%);
}

/* ‚ú® SEVERITY BADGES */
.alert-detail-severity {
    font-size: 12px;
    font-weight: 900;
    padding: 6px 14px;
    border-radius: 10px;
    letter-spacing: 1px;
}

.severity-critical {
    background: rgba(239, 68, 68, 0.15);
    color: #dc2626;
}

.severity-warning {
    background: rgba(245, 158, 11, 0.15);
    color: #f59e0b;
}

.severity-info {
    background: rgba(59, 130, 246, 0.15);
    color: #3b82f6;
}

/* ‚ú® USAGE BAR FOR STORAGE */
.alert-detail-prediction {
    font-size: 14px;
    color: var(--text-color);
    opacity: 0.8;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 10px;
    padding: 10px;
    background: rgba(0, 0, 0, 0.04);
    border-radius: 10px;
}

.alert-detail-prediction-icon {
    font-size: 16px;
}

.alert-detail-usage {
    margin-top: 14px;
    padding: 14px;
    background: rgba(0, 0, 0, 0.04);
    border-radius: 12px;
}

.usage-bar-container {
    width: 100%;
    height: 12px;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 10px;
}

.usage-bar {
    height: 100%;
    transition: width 0.6s ease;
    border-radius: 10px;
}

.usage-normal {
    background: linear-gradient(90deg, #10b981, #14b8a6);
}

.usage-warning {
    background: linear-gradient(90deg, #f59e0b, #f97316);
}

.usage-critical {
    background: linear-gradient(90deg, #ef4444, #dc2626);
    animation: usagePulse 2s infinite;
}

@keyframes usagePulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.7;
    }
}

.usage-text {
    display: flex;
    justify-content: space-between;
    font-size: 13px;
    font-weight: 700;
    color: var(--text-color);
    opacity: 0.8;
}

/* ‚ú® FOOTER STATS */
.alert-detail-footer {
    padding: 24px 36px;
    border-top: 2px solid rgba(0, 0, 0, 0.06);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.alert-detail-footer-stats {
    display: flex;
    gap: 24px;
}

.footer-stat {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 800;
    color: var(--text-color);
    opacity: 0.7;
}

.footer-stat-icon {
    font-size: 18px;
}



