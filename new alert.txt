data() {
    return {
        currentTheme: 'theme-vedas',
        autoThemeEnabled: false,
        currentTime: '',
        sidebarCollapsed: false,
        currentPage: 'home',
        currentAppUrl: '',
        alertPanelCollapsedUp: false,
        alertPanelCollapsedLeft: false,
        datasetSectionCollapsed: false,
        serverSectionCollapsed: false,
        processSectionCollapsed: false,
        storageSectionCollapsed: false,  // âœ… ADD THIS
        datasetAlerts: [],
        serverAlerts: [],
        processAlerts: [],
        storageAlerts: [],  // âœ… ADD THIS
        clearedAlerts: new Set(),
        lastUpdated: '',
        totalServers: 20,
        totalServices: 41,
        isLoading: false,
        isRefreshing: false,
        showHistory: false,
        alertHistory: [],




computed: {
    allApplications() {
        return [...this.monitoringApps, ...this.dataApps, ...this.toolsApps];
    },
    totalAlerts() {
        return this.datasetAlerts.length + this.serverAlerts.length + this.processAlerts.length + this.storageAlerts.length;  // âœ… ADD storageAlerts
    },
    isPanelCollapsed() {
        return this.alertPanelCollapsedUp || this.alertPanelCollapsedLeft;
    },
    allSectionsCollapsed() {
        return this.datasetSectionCollapsed && this.serverSectionCollapsed && this.processSectionCollapsed && this.storageSectionCollapsed;  // âœ… ADD storageSectionCollapsed
    }
},



toggleProcessSection() {
    this.processSectionCollapsed = !this.processSectionCollapsed;
},
toggleStorageSection() {  // âœ… ADD THIS METHOD
    this.storageSectionCollapsed = !this.storageSectionCollapsed;
},
collapseAllSections() {
    if (this.allSectionsCollapsed) {
        this.datasetSectionCollapsed = false;
        this.serverSectionCollapsed = false;
        this.processSectionCollapsed = false;
        this.storageSectionCollapsed = false;  // âœ… ADD THIS
    } else {
        this.datasetSectionCollapsed = true;
        this.serverSectionCollapsed = true;
        this.processSectionCollapsed = true;
        this.storageSectionCollapsed = true;  // âœ… ADD THIS
    }
},



async fetchAlerts() {
    try {
        // ... existing dataset fetch code ...
        // ... existing server fetch code ...
        // ... existing process fetch code ...

        // âœ… ADD STORAGE POOL MONITORING
        const storageResponse = await fetch('http://192.168.2.137:8080/storage_monitoring_api/summary?summary_type=pools_only');
        const storageData = await storageResponse.json();

        const tempStorageAlerts = [];
        
        if (storageData.pools) {
            Object.keys(storageData.pools).forEach(poolName => {
                const pool = storageData.pools[poolName];
                
                // Only monitor MASTER
                if (pool.master && pool.master.stats) {
                    const stats = pool.master.stats;
                    const usedSize = stats.size;
                    const totalSize = stats.total_size;
                    const usagePercent = (usedSize / totalSize) * 100;
                    const remainingSize = totalSize - usedSize;
                    
                    let alertType = '';
                    let alertMessage = '';
                    
                    // Critical Alert: >= 90% full
                    if (usagePercent >= 90) {
                        alertType = 'alert';
                        alertMessage = `${poolName} is ${usagePercent.toFixed(1)}% full (${usedSize.toFixed(2)} GB / ${totalSize} GB) - Critical!`;
                        
                        tempStorageAlerts.push({
                            type: alertType,
                            message: alertMessage,
                            server: `Storage Pool - ${poolName.toUpperCase()}`,
                            usage: usagePercent.toFixed(1),
                            remaining: remainingSize.toFixed(2),
                            prediction: stats.prediction.predicted_fill_date
                        });
                    }
                    // Warning: >= 75% and < 90%
                    else if (usagePercent >= 75) {
                        alertType = 'warning';
                        alertMessage = `${poolName} is ${usagePercent.toFixed(1)}% full (${usedSize.toFixed(2)} GB / ${totalSize} GB) - Warning!`;
                        
                        tempStorageAlerts.push({
                            type: alertType,
                            message: alertMessage,
                            server: `Storage Pool - ${poolName.toUpperCase()}`,
                            usage: usagePercent.toFixed(1),
                            remaining: remainingSize.toFixed(2),
                            prediction: stats.prediction.predicted_fill_date
                        });
                    }
                    // Info: >= 60% (optional - to show pools approaching limits)
                    else if (usagePercent >= 60) {
                        alertType = 'info';
                        alertMessage = `${poolName} is ${usagePercent.toFixed(1)}% full (${usedSize.toFixed(2)} GB / ${totalSize} GB) - Healthy`;
                        
                        tempStorageAlerts.push({
                            type: alertType,
                            message: alertMessage,
                            server: `Storage Pool - ${poolName.toUpperCase()}`,
                            usage: usagePercent.toFixed(1),
                            remaining: remainingSize.toFixed(2),
                            prediction: stats.prediction.predicted_fill_date
                        });
                    }
                }
            });
        }

        this.storageAlerts = tempStorageAlerts.filter(alert =>
            !this.clearedAlerts.has(this.getAlertKey('storage', alert))
        );

        // ... rest of existing code ...

        const currentAlertKeys = new Set();
        [...tempDatasetAlerts, ...serverData.alerts || [], ...(processData.data?.alerts || []), ...tempStorageAlerts].forEach(alert => {  // âœ… ADD tempStorageAlerts
            const key = this.getAlertKey('dataset', alert) || this.getAlertKey('server', alert) || this.getAlertKey('process', alert) || this.getAlertKey('storage', alert);  // âœ… ADD storage key
            currentAlertKeys.add(key);
        });

        this.clearedAlerts = new Set(
            [...this.clearedAlerts].filter(key => currentAlertKeys.has(key))
        );

    } catch (error) {
        console.error('Error fetching alerts:', error);
    }
},




removeAlert(type, index) {
    const now = new Date();
    const timeStr = now.toLocaleString('en-IN', {
        month: 'short',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
    });

    if (type === 'dataset') {
        const alert = this.datasetAlerts[index];
        this.alertHistory.unshift({ ...alert, clearedAt: timeStr });
        this.clearedAlerts.add(this.getAlertKey('dataset', alert));
        this.datasetAlerts.splice(index, 1);
    } else if (type === 'server') {
        const alert = this.serverAlerts[index];
        this.alertHistory.unshift({ ...alert, clearedAt: timeStr });
        this.clearedAlerts.add(this.getAlertKey('server', alert));
        this.serverAlerts.splice(index, 1);
    } else if (type === 'process') {
        const alert = this.processAlerts[index];
        this.alertHistory.unshift({ ...alert, clearedAt: timeStr });
        this.clearedAlerts.add(this.getAlertKey('process', alert));
        this.processAlerts.splice(index, 1);
    } else if (type === 'storage') {  // âœ… ADD THIS
        const alert = this.storageAlerts[index];
        this.alertHistory.unshift({ ...alert, clearedAt: timeStr });
        this.clearedAlerts.add(this.getAlertKey('storage', alert));
        this.storageAlerts.splice(index, 1);
    }

    if (this.alertHistory.length > 50) {
        this.alertHistory = this.alertHistory.slice(0, 50);
    }
},




clearAllAlerts() {
    const now = new Date();
    const timeStr = now.toLocaleString('en-IN', {
        month: 'short',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
    });

    this.datasetAlerts.forEach(alert => {
        this.alertHistory.unshift({ ...alert, clearedAt: timeStr });
        this.clearedAlerts.add(this.getAlertKey('dataset', alert));
    });
    this.serverAlerts.forEach(alert => {
        this.alertHistory.unshift({ ...alert, clearedAt: timeStr });
        this.clearedAlerts.add(this.getAlertKey('server', alert));
    });
    this.processAlerts.forEach(alert => {
        this.alertHistory.unshift({ ...alert, clearedAt: timeStr });
        this.clearedAlerts.add(this.getAlertKey('process', alert));
    });
    this.storageAlerts.forEach(alert => {  // âœ… ADD THIS
        this.alertHistory.unshift({ ...alert, clearedAt: timeStr });
        this.clearedAlerts.add(this.getAlertKey('storage', alert));
    });

    this.datasetAlerts = [];
    this.serverAlerts = [];
    this.processAlerts = [];
    this.storageAlerts = [];  // âœ… ADD THIS

    if (this.alertHistory.length > 50) {
        this.alertHistory = this.alertHistory.slice(0, 50);
    }
},





<!-- âš™ï¸ PROCESS ALERTS - ORDER 3 -->
<div class="alert-section" v-if="processAlerts.length > 0">
    <!-- existing process alerts code -->
</div>

<!-- ðŸ’¾ STORAGE ALERTS - ORDER 4 âœ… ADD THIS ENTIRE SECTION -->
<div class="alert-section" v-if="storageAlerts.length > 0">
    <div class="alert-section-header" @click="toggleStorageSection">
        <div class="alert-section-title">
            ðŸ’¾ Storage Pools ({{ storageAlerts.length }})
        </div>
        <span class="collapse-icon" :class="{ collapsed: storageSectionCollapsed }">â–¼</span>
    </div>
    <div class="alert-section-content" :class="{ collapsed: storageSectionCollapsed, 'limit-height': !storageSectionCollapsed && storageAlerts.length > 2 }">
        <div v-for="(alert, index) in storageAlerts" :key="'storage-' + index" class="alert-item"
            :class="'alert-' + alert.type.toLowerCase()">
            <div class="alert-content">
                <div class="alert-type">{{ alert.type }}</div>
                <div class="alert-message">{{ alert.message }}</div>
                <div class="alert-server">{{ alert.server }} | Fill Date: {{ alert.prediction }}</div>
            </div>
            <button class="alert-delete-btn" @click="removeAlert('storage', index)">Ã—</button>
        </div>
    </div>
</div>



.alert-offline,
.alert-memory,
.alert-cpu {
    background: rgba(239, 68, 68, 0.12) !important;
    border-left: 6px solid #ef4444 !important;
    animation: blinkRed 3s ease-in-out infinite;
    backdrop-filter: blur(20px);
}

.alert-storage,
.alert-disk,
.alert-warning {
    background: rgba(245, 158, 11, 0.12) !important;
    border-left: 6px solid #f59e0b !important;
    animation: blinkOrange 3s ease-in-out infinite;
    backdrop-filter: blur(20px);
}

.alert-failed,
.alert-alert {
    background: rgba(239, 68, 68, 0.12) !important;
    border-left: 6px solid #ef4444 !important;
    animation: blinkRed 3s ease-in-out infinite;
}

/* âœ… ADD INFO ALERT TYPE */
.alert-info {
    background: rgba(59, 130, 246, 0.12) !important;
    border-left: 6px solid #3b82f6 !important;
    animation: blinkBlue 3s ease-in-out infinite;
    backdrop-filter: blur(20px);
}

@keyframes blinkBlue {
    0%, 100% {
        box-shadow: 0 4px 20px rgba(59, 130, 246, 0.2);
    }
    50% {
        box-shadow: 0 8px 40px rgba(59, 130, 246, 0.4);
    }
}

.alert-info .alert-type {
    color: #3b82f6 !important;
    font-weight: 900;
}



